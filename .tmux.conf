# always load the reset file first
source-file ~/.tmux.reset.conf

unbind C-b

set -g prefix C-t
bind-key t send-prefix
set-option -g history-limit 10000

# set -g @yank_selection "primary"
# # tmux plug-in manager
# set -g @tpm_plugins "          \
#   tmux-plugins/tpm             \
#   tmux-plugins/tmux-yank       \
# "

setw -g mode-keys vi
# unbind [
# bind Escape copy-mode
unbind p
bind w paste-buffer
bind-key -Tcopy-mode-vi 'v' send -X begin-selection
bind-key -Tcopy-mode-vi 'y' send -X copy-selection

# Attempts to copy tmux buffer to OS clipboard
# bind -t vi-copy y copy-pipe "xclip"

# move x clipboard into tmux paste buffer
# bind C-p run "tmux set-buffer \"$(xclip -o)\"; tmux paste-buffer"
# move tmux copy buffer into x clipboard
bind C-y run-shell -b "tmux save-buffer - | xclip -selection c &>/dev/null; tmux display-message \"Tmux buffer saved to clipboard\" "
# bind C-y run "tmux save-buffer - | xclip -i"

# shortcut to reload .tmux.conf 
bind-key r source-file ~/.tmux.conf \; display-message "Configuration reloaded"

## set the default TERM
set -g default-terminal screen

## update the TERM variable of terminal emulator when creating a new session or attaching a existing session
set -g update-environment 'DISPLAY SSH_ASKPASS SSH_AGENT_PID SSH_CONNECTION WINDOWID XAUTHORITY TERM'
## determine if we should enable 256-colour support
if "[[ ${TERM} =~ 256color || ${TERM} == fbterm  ]]" 'set -g default-terminal screen-256color'

set -g terminal-overrides 'rxvt-unicode*:sitm@,ritm@'
set-window-option -g utf8

# swap windows 
# inspiration: http://superuser.com/questions/343572/how-do-i-reorder-tmux-windows
bind-key m swap-window -t -1
bind-key , swap-window -t +1

# navigate windows
bind-key n next-window
bind-key p previous-window
# for browser-like window nav
# bind-key -n C-S-Tab previous-window
# bind-key -n C-Tab next-window

bind j select-pane -D
bind k select-pane -U
bind h select-pane -L
bind l select-pane -R

bind | split-window -h
bind - split-window -v

bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r H resize-pane -L 5
bind -r L resize-pane -R 5

set -g pane-border-fg white
set -g pane-active-border-fg cyan
set -g pane-active-border-bg cyan
