#!/bin/bash

case $1 in
  pass|password|p)
    cat /etc/wpa_supplicant/wpa_supplicant-wlp4s0.conf | grep -i -A 1 "$2" | grep -A 1 "^[[:space:]]\+ssid="
    ;;
  scan|sc)
    wpa_cli scan && sleep 5 && wpa_cli scan_results | less
    # sudo iw dev wlp4s0 scan | grep "SSID\|signal" | less
    ;;
  search|s)
    cat /etc/wpa_supplicant/wpa_supplicant-wlp4s0.conf | grep -i -A 3 "$2" | grep -A 3 "^[[:space:]]\+ssid="
    ;;
  add|a)
    echo "2 is: $2"
    echo "3 is: $3"
    wpa_passphrase $2 $3 | sudo tee -a /etc/wpa_supplicant/wpa_supplicant-wlp4s0.conf
    ;;
  current|c)
    # wpa_cli list_networks | grep CURRENT
    iw wlp4s0 link
    ;;
  *)
    echo "Invalid input."
    echo "Valid inputs are:"
    echo ""
    echo "pass|p <ssid> (gets the password)"
    echo "scan|sc (performs a scan and returns the result)"
    echo "search|s <ssid> (returns network info)"
    echo "add|a <ssid> <psk> (creates new network for ssid/password)"
    echo "current|c"
    echo ""
    echo "goodbye!"
    ;;
esac

# sudo iw wlp4s0 scan | grep SSID
# cat /etc/wpa_supplicant/wpa_supplicant-wlp4s0.conf | grep -A 2

# while getopts 'abf:v --long a-long,b-long:,v-long::' flag; do
#    echo "${flag}"
# #   case "${flag}" in
# #     a) aflag='true' ;;
# #     b) bflag='true' ;;
# #     f) files="${OPTARG}" ;;
# #     v) verbose='true' ;;
# #     *) error "Unexpected option ${flag}" ;;
# #   esac
# done
